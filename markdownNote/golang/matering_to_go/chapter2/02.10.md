## Go 汇编器

本节将简要讨论汇编语言和 Go 汇编器，这是一个 Go 工具，可让你查看 Go 编译器使用的汇编语言。

例如，通过执行以下，你可以看到在本章上一节中看到的`goEnv.go`程序的汇编语言：

```shell
$ GOOS=darwin GOARCH=amd64 go tool compile -S goEnv.go
```

`GOOS`变量的值定义目标操作系统的名称，而`GOARCH`变量的值定义编译体系结构。以上的命令在 macOS Mojave 机器上执行，因此将`darwin`值赋予`GOOS`变量。

即使对于像`goEnv.go`这样的简单程序，以上命令的输出也非常复杂：

```shell
"".main STEXT size=859 args=0x0 locals=0x118
  0x0000 00000 (goEnv.go:8)   TEXT    "".main(SB), $280-0
  0x00be 00190 (goEnv.go:9)   PCDATA  $0, $1
  0x0308 00776 (goEnv.go:13)  PCDATA  $0, $5
  0x0308 00776 (goEnv.go:13)  CALL    runtime.convT2E64(SB)
"".init STEXT size=96 args=0x0 locals=0x8
  0x0000 00000 (<autogenerated>:1) TEXT    "".init(SB), $8-0
  0x0000 00000 (<autogenerated>:1) MOVQ    (TLS), CX
  0x001d 00029 (<autogenerated>:1) FUNCDATA        $0,
gclocals d4dc2f11db048877dbc0f60a22b4adb3(SB)
  0x001d 00029 (<autogenerated>:1) FUNCDATA        $1,
  gclocals 33cdeccccebe80329f1fdbee7f5874cb(SB)
```

包含`FUNCDATA`和`PCDATA`指令的行由 Go 垃圾收集器读取和使用，并由 Go 编译器自动生成。

这条命令和以上命令是等效的：

```shell
$ GOOS=darwin GOARCH=amd64 go build -gcflags -S goEnv.go
```

`GOOS`变量可能的取值包括`android, darwin, dragonfly, freebsd, linux, nacl, netbsd, openbsd, plan9, solaris, windows, 和 zos`。`GOARCH`可能的取值包括`386, amd64, amd64p32, arm, armbe, arm64, arm64be, ppc64, ppc64le, mips, mipsle, mips64, mips64le, mips64p32, mips64p32le, ppc, s390, s390x, sparc, 和sparc64`。

> Tip: 如果你真的对Go汇编器感兴趣，并且想要更多信息，请访问https://golang.org/doc/asm。



